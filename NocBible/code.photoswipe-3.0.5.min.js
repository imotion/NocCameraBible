(function(n){Function.prototype.bind||(Function.prototype.bind=function(n){var i=[].slice,f=i.call(arguments,1),r=this,t=function(){},u=function(){return r.apply(this instanceof t?this:n||{},f.concat(i.call(arguments)))};return t.prototype=r.prototype,u.prototype=new t,u}),typeof n.Code=="undefined"&&(n.Code={}),n.Code.Util={registerNamespace:function(){for(var e=arguments,r=null,t,o,i,f,h,u=0,s=e.length;u<s;u++)for(o=e[u],i=o.split("."),f=i[0],typeof n[f]=="undefined"&&(n[f]={}),r=n[f],t=1,h=i.length;t<h;++t)r[i[t]]=r[i[t]]||{},r=r[i[t]]},coalesce:function(){for(var n=0,t=arguments.length;n<t;n++)if(!this.isNothing(arguments[n]))return arguments[n];return null},extend:function(n,t,i){var r;if(this.isNothing(i)&&(i=!0),n&&t&&this.isObject(t))for(r in t)this.objectHasProperty(t,r)&&(i?n[r]=t[r]:typeof n[r]=="undefined"&&(n[r]=t[r]))},clone:function(n){var t={};return this.extend(t,n),t},isObject:function(n){return n instanceof Object},isFunction:function(n){return{}.toString.call(n)==="[object Function]"},isArray:function(n){return n instanceof Array},isLikeArray:function(n){return typeof n.length=="number"},isNumber:function(n){return typeof n=="number"},isString:function(n){return typeof n=="string"},isNothing:function(n){return typeof n=="undefined"||n===null?!0:!1},swapArrayElements:function(n,t,i){var r=n[t];n[t]=n[i],n[i]=r},trim:function(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},toCamelCase:function(n){return n.replace(/(\-[a-z])/g,function(n){return n.toUpperCase().replace("-","")})},toDashedCase:function(n){return n.replace(/([A-Z])/g,function(n){return"-"+n.toLowerCase()})},arrayIndexOf:function(n,t,i){var r,e,u,f;for(u=-1,r=0,e=t.length;r<e;r++)if(f=t[r],this.isNothing(i)){if(f===n){u=r;break}}else if(this.objectHasProperty(f,i)&&f[i]===n){u=r;break}return u},objectHasProperty:function(n,t){return n.hasOwnProperty?n.hasOwnProperty(t):"undefined"!=typeof n[t]}}})(window),function(n,t){t.Browser={ua:null,version:null,safari:null,webkit:null,opera:null,msie:null,chrome:null,mozilla:null,android:null,blackberry:null,iPad:null,iPhone:null,iPod:null,iOS:null,is3dSupported:null,isCSSTransformSupported:null,isTouchSupported:null,isGestureSupported:null,_detect:function(){this.ua=n.navigator.userAgent,this.version=this.ua.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[],this.safari=/Safari/gi.test(n.navigator.appVersion),this.webkit=/webkit/i.test(this.ua),this.opera=/opera/i.test(this.ua),this.msie=/msie/i.test(this.ua)&&!this.opera,this.chrome=/Chrome/i.test(this.ua),this.firefox=/Firefox/i.test(this.ua),this.fennec=/Fennec/i.test(this.ua),this.mozilla=/mozilla/i.test(this.ua)&&!/(compatible|webkit)/.test(this.ua),this.android=/android/i.test(this.ua),this.blackberry=/blackberry/i.test(this.ua),this.iOS=/iphone|ipod|ipad/gi.test(n.navigator.platform),this.iPad=/ipad/gi.test(n.navigator.platform),this.iPhone=/iphone/gi.test(n.navigator.platform),this.iPod=/ipod/gi.test(n.navigator.platform);var i=document.createElement("div");this.is3dSupported=!t.isNothing(i.style.WebkitPerspective),this.isCSSTransformSupported=!t.isNothing(i.style.WebkitTransform)||!t.isNothing(i.style.MozTransform)||!t.isNothing(i.style.transformProperty),this.isTouchSupported=this.isEventSupported("touchstart"),this.isGestureSupported=this.isEventSupported("gesturestart")},_eventTagNames:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},isEventSupported:function(n){var i=document.createElement(this._eventTagNames[n]||"div"),r;return n="on"+n,r=t.objectHasProperty(i,n),r||(i.setAttribute(n,"return;"),r=typeof i[n]=="function"),i=null,r},isLandscape:function(){return t.DOM.windowWidth()>t.DOM.windowHeight()}},t.Browser._detect()}(window,window.Code.Util),function(n,t){t.extend(t,{Events:{add:function(n,t,i){this._checkHandlersProperty(n),t==="mousewheel"&&(t=this._normaliseMouseWheelType()),typeof n.__eventHandlers[t]=="undefined"&&(n.__eventHandlers[t]=[]),n.__eventHandlers[t].push(i),this._isBrowserObject(n)&&n.addEventListener(t,i,!1)},remove:function(n,i,r){if(this._checkHandlersProperty(n),i==="mousewheel"&&(i=this._normaliseMouseWheelType()),n.__eventHandlers[i]instanceof Array){var u,e,f=n.__eventHandlers[i];if(t.isNothing(r)){if(this._isBrowserObject(n))for(u=0,e=f.length;u<e;u++)n.removeEventListener(i,f[u],!1);n.__eventHandlers[i]=[];return}for(u=0,e=f.length;u<e;u++)if(f[u]===r){f.splice(u,1);break}if(this._isBrowserObject(n)){n.removeEventListener(i,r,!1);return}}},fire:function(i,r){var f,c,u,e,o,s=Array.prototype.slice.call(arguments).splice(2),h;if(r==="mousewheel"&&(r=this._normaliseMouseWheelType()),this._isBrowserObject(i)){if(typeof r!="string")throw"type must be a string for DOM elements";if(h=this._NATIVE_EVENTS[r],u=document.createEvent(h?"HTMLEvents":"UIEvents"),u[h?"initEvent":"initUIEvent"](r,!0,!0,n,1),s.length<1){i.dispatchEvent(u);return}}if(this._checkHandlersProperty(i),u=typeof r=="string"?{type:r}:r,u.target||(u.target=i),!u.type)throw new Error("Event object missing 'type' property.");if(i.__eventHandlers[u.type]instanceof Array)for(e=i.__eventHandlers[u.type],s.unshift(u),f=0,c=e.length;f<c;f++)o=e[f],t.isNothing(o)||o.apply(i,s)},getMousePosition:function(n){var t={x:0,y:0};return n.pageX?t.x=n.pageX:n.clientX&&(t.x=n.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),n.pageY?t.y=n.pageY:n.clientY&&(t.y=n.clientY+(document.documentElement.scrollTop||document.body.scrollTop)),t},getTouchEvent:function(n){return n},getWheelDelta:function(n){var i=0;return t.isNothing(n.wheelDelta)?t.isNothing(n.detail)||(i=-n.detail/3):i=n.wheelDelta/120,i},domReady:function(n){document.addEventListener("DOMContentLoaded",n,!1)},_checkHandlersProperty:function(n){t.isNothing(n.__eventHandlers)&&t.extend(n,{__eventHandlers:{}})},_isBrowserObject:function(t){return t===n||t===n.document?!0:this._isElement(t)||this._isNode(t)},_isElement:function(t){return typeof n.HTMLElement=="object"?t instanceof n.HTMLElement:typeof t=="object"&&t.nodeType===1&&typeof t.nodeName=="string"},_isNode:function(t){return typeof n.Node=="object"?t instanceof n.Node:typeof t=="object"&&typeof t.nodeType=="number"&&typeof t.nodeName=="string"},_normaliseMouseWheelType:function(){return t.Browser.isEventSupported("mousewheel")?"mousewheel":"DOMMouseScroll"},_NATIVE_EVENTS:{click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1}}})}(window,window.Code.Util),function(n,t){t.extend(t,{DOM:{setData:function(n,i,r){if(t.isLikeArray(n))for(var u=0,f=n.length;u<f;u++)t.DOM._setData(n[u],i,r);else t.DOM._setData(n,i,r)},_setData:function(n,i,r){t.DOM.setAttribute(n,"data-"+i,r)},getData:function(n,i,r){return t.DOM.getAttribute(n,"data-"+i,r)},removeData:function(n,i){if(t.isLikeArray(n))for(var r=0,u=n.length;r<u;r++)t.DOM._removeData(n[r],i);else t.DOM._removeData(n,i)},_removeData:function(n,i){t.DOM.removeAttribute(n,"data-"+i)},isChildOf:function(n,t){if(t===n)return!1;while(n&&n!==t)n=n.parentNode;return n===t},find:function(i,r){t.isNothing(r)&&(r=n.document);for(var f=r.querySelectorAll(i),e=[],u=0,o=f.length;u<o;u++)e.push(f[u]);return e},createElement:function(n,i,r){var u,f=document.createElement(n);for(u in i)t.objectHasProperty(i,u)&&f.setAttribute(u,i[u]);return f.innerHTML=r||"",f},appendChild:function(n,t){t.appendChild(n)},insertBefore:function(n,t,i){i.insertBefore(n,t)},appendText:function(n,i){t.DOM.appendChild(document.createTextNode(n),i)},appendToBody:function(n){this.appendChild(n,document.body)},removeChild:function(n,t){t.removeChild(n)},removeChildren:function(n){if(n.hasChildNodes())while(n.childNodes.length>=1)n.removeChild(n.childNodes[n.childNodes.length-1])},hasAttribute:function(n,i){return!t.isNothing(n.getAttribute(i))},getAttribute:function(n,i,r){var u=n.getAttribute(i);return t.isNothing(u)&&!t.isNothing(r)&&(u=r),u},setAttribute:function(n,i,r){if(t.isLikeArray(n))for(var u=0,f=n.length;u<f;u++)t.DOM._setAttribute(n[u],i,r);else t.DOM._setAttribute(n,i,r)},_setAttribute:function(n,t,i){n.setAttribute(t,i)},removeAttribute:function(n,i){if(t.isLikeArray(n))for(var r=0,u=n.length;r<u;r++)t.DOM._removeAttribute(n[r],i);else t.DOM._removeAttribute(n,i)},_removeAttribute:function(n,t){this.hasAttribute(n,t)&&n.removeAttribute(t)},addClass:function(n,i){if(t.isLikeArray(n))for(var r=0,u=n.length;r<u;r++)t.DOM._addClass(n[r],i);else t.DOM._addClass(n,i)},_addClass:function(n,i){var r=t.DOM.getAttribute(n,"class",""),u=new RegExp("(?:^|\\s+)"+i+"(?:\\s+|$)");u.test(r)||(r!==""&&(r=r+" "),r=r+i,t.DOM.setAttribute(n,"class",r))},removeClass:function(n,i){if(t.isLikeArray(n))for(var r=0,u=n.length;r<u;r++)t.DOM._removeClass(n[r],i);else t.DOM._removeClass(n,i)},_removeClass:function(n,i){for(var o=t.DOM.getAttribute(n,"class",""),f=t.trim(o).split(" "),r="",u=0,e=f.length;u<e;u++)f[u]!==i&&(r!==""&&(r+=" "),r+=f[u]);r===""?t.DOM.removeAttribute(n,"class"):t.DOM.setAttribute(n,"class",r)},hasClass:function(n,i){var r=new RegExp("(?:^|\\s+)"+i+"(?:\\s+|$)");return r.test(t.DOM.getAttribute(n,"class",""))},setStyle:function(n,i,r){if(t.isLikeArray(n))for(var u=0,f=n.length;u<f;u++)t.DOM._setStyle(n[u],i,r);else t.DOM._setStyle(n,i,r)},_setStyle:function(n,i,r){var u;if(t.isObject(i))for(u in i)t.objectHasProperty(i,u)&&(u==="width"?t.DOM.width(n,i[u]):u==="height"?t.DOM.height(n,i[u]):n.style[u]=i[u]);else n.style[i]=r},getStyle:function(t,i){var r=n.getComputedStyle(t,"").getPropertyValue(i);return r===""&&(r=t.style[i]),r},hide:function(n){if(t.isLikeArray(n))for(var i=0,r=n.length;i<r;i++)t.DOM._hide(n[i]);else t.DOM._hide(n)},_hide:function(n){t.DOM.setData(n,"ccl-disp",t.DOM.getStyle(n,"display")),t.DOM.setStyle(n,"display","none")},show:function(n){if(t.isLikeArray(n))for(var i=0,r=n.length;i<r;i++)t.DOM._show(n[i]);else t.DOM._show(n)},_show:function(n){if(t.DOM.getStyle(n,"display")==="none"){var i=t.DOM.getData(n,"ccl-disp","block");(i==="none"||i==="")&&(i="block"),t.DOM.setStyle(n,"display",i)}},width:function(n,i){return t.isNothing(i)||(t.isNumber(i)&&(i=i+"px"),n.style.width=i),this._getDimension(n,"width")},outerWidth:function(n){var i=t.DOM.width(n);return i+=parseInt(t.DOM.getStyle(n,"padding-left"),10)+parseInt(t.DOM.getStyle(n,"padding-right"),10),i+=parseInt(t.DOM.getStyle(n,"margin-left"),10)+parseInt(t.DOM.getStyle(n,"margin-right"),10),i+(parseInt(t.DOM.getStyle(n,"border-left-width"),10)+parseInt(t.DOM.getStyle(n,"border-right-width"),10))},height:function(n,i){return t.isNothing(i)||(t.isNumber(i)&&(i=i+"px"),n.style.height=i),this._getDimension(n,"height")},_getDimension:function(t,i){var r=n.parseInt(n.getComputedStyle(t,"").getPropertyValue(i)),u;return isNaN(r)&&(u={display:t.style.display,left:t.style.left},t.style.display="block",t.style.left="-1000000px",r=n.parseInt(n.getComputedStyle(t,"").getPropertyValue(i)),t.style.display=u.display,t.style.left=u.left),r},outerHeight:function(n){var i=t.DOM.height(n);return i+=parseInt(t.DOM.getStyle(n,"padding-top"),10)+parseInt(t.DOM.getStyle(n,"padding-bottom"),10),i+=parseInt(t.DOM.getStyle(n,"margin-top"),10)+parseInt(t.DOM.getStyle(n,"margin-bottom"),10),i+(parseInt(t.DOM.getStyle(n,"border-top-width"),10)+parseInt(t.DOM.getStyle(n,"border-bottom-width"),10))},documentWidth:function(){return t.DOM.width(document.documentElement)},documentHeight:function(){return t.DOM.height(document.documentElement)},documentOuterWidth:function(){return t.DOM.width(document.documentElement)},documentOuterHeight:function(){return t.DOM.outerHeight(document.documentElement)},bodyWidth:function(){return t.DOM.width(document.body)},bodyHeight:function(){return t.DOM.height(document.body)},bodyOuterWidth:function(){return t.DOM.outerWidth(document.body)},bodyOuterHeight:function(){return t.DOM.outerHeight(document.body)},windowWidth:function(){return n.innerWidth},windowHeight:function(){return n.innerHeight},windowScrollLeft:function(){return n.pageXOffset},windowScrollTop:function(){return n.pageYOffset}}})}(window,window.Code.Util),function(n,t){t.extend(t,{Animation:{_applyTransitionDelay:50,_transitionEndLabel:n.document.documentElement.style.webkitTransition!==undefined?"webkitTransitionEnd":"transitionend",_transitionEndHandler:null,_transitionPrefix:n.document.documentElement.style.webkitTransition!==undefined?"webkitTransition":n.document.documentElement.style.MozTransition!==undefined?"MozTransition":"transition",_transformLabel:n.document.documentElement.style.webkitTransform!==undefined?"webkitTransform":n.document.documentElement.style.MozTransition!==undefined?"MozTransform":"transform",_getTransitionEndHandler:function(){return t.isNothing(this._transitionEndHandler)&&(this._transitionEndHandler=this._onTransitionEnd.bind(this)),this._transitionEndHandler},stop:function(i){if(t.Browser.isCSSTransformSupported){var u=i.style[this._transitionPrefix+"Property"],f=u!==""?"ccl"+u+"callback":"cclallcallback",r={};t.Events.remove(i,this._transitionEndLabel,this._getTransitionEndHandler()),t.isNothing(i.callbackLabel)&&delete i.callbackLabel,r[this._transitionPrefix+"Property"]="",r[this._transitionPrefix+"Duration"]="",r[this._transitionPrefix+"TimingFunction"]="",r[this._transitionPrefix+"Delay"]="",r[this._transformLabel]="",t.DOM.setStyle(i,r)}else t.isNothing(n.jQuery)||n.jQuery(i).stop(!0,!0)},fadeIn:function(i,r,u,f,e){if(e=t.coalesce(e,1),e<=0&&(e=1),r<=0&&(t.DOM.setStyle(i,"opacity",e),!t.isNothing(u))){u(i);return}var o=t.DOM.getStyle(i,"opacity");o>=1&&t.DOM.setStyle(i,"opacity",0),t.Browser.isCSSTransformSupported?this._applyTransition(i,"opacity",e,r,u,f):t.isNothing(n.jQuery)||n.jQuery(i).fadeTo(r,e,u)},fadeTo:function(n,t,i,r,u){this.fadeIn(n,i,r,u,t)},fadeOut:function(i,r,u,f){if(r<=0&&(t.DOM.setStyle(i,"opacity",0),!t.isNothing(u))){u(i);return}t.Browser.isCSSTransformSupported?this._applyTransition(i,"opacity",0,r,u,f):n.jQuery(i).fadeTo(r,0,u)},slideBy:function(i,r,u,f,e,o){var s={};r=t.coalesce(r,0),u=t.coalesce(u,0),o=t.coalesce(o,"ease-out"),s[this._transitionPrefix+"Property"]="all",s[this._transitionPrefix+"Delay"]="0",f===0?(s[this._transitionPrefix+"Duration"]="",s[this._transitionPrefix+"TimingFunction"]=""):(s[this._transitionPrefix+"Duration"]=f+"ms",s[this._transitionPrefix+"TimingFunction"]=t.coalesce(o,"ease-out"),t.Events.add(i,this._transitionEndLabel,this._getTransitionEndHandler())),s[this._transformLabel]=t.Browser.is3dSupported?"translate3d("+r+"px, "+u+"px, 0px)":"translate("+r+"px, "+u+"px)",t.isNothing(e)||(i.cclallcallback=e),t.DOM.setStyle(i,s),f===0&&n.setTimeout(function(){this._leaveTransforms(i)}.bind(this),this._applyTransitionDelay)},resetTranslate:function(n){var i={};i[this._transformLabel]=i[this._transformLabel]=t.Browser.is3dSupported?"translate3d(0px, 0px, 0px)":"translate(0px, 0px)",t.DOM.setStyle(n,i)},_applyTransition:function(i,r,u,f,e,o){var s={};o=t.coalesce(o,"ease-in"),s[this._transitionPrefix+"Property"]=r,s[this._transitionPrefix+"Duration"]=f+"ms",s[this._transitionPrefix+"TimingFunction"]=o,s[this._transitionPrefix+"Delay"]="0",t.Events.add(i,this._transitionEndLabel,this._getTransitionEndHandler()),t.DOM.setStyle(i,s),t.isNothing(e)||(i["ccl"+r+"callback"]=e),n.setTimeout(function(){t.DOM.setStyle(i,r,u)},this._applyTransitionDelay)},_onTransitionEnd:function(n){t.Events.remove(n.currentTarget,this._transitionEndLabel,this._getTransitionEndHandler()),this._leaveTransforms(n.currentTarget)},_leaveTransforms:function(i){var s=i.style[this._transitionPrefix+"Property"],f=s!==""?"ccl"+s+"callback":"cclallcallback",h,e=t.coalesce(i.style.webkitTransform,i.style.MozTransform,i.style.transform),o,u,a=n.parseInt(t.DOM.getStyle(i,"left"),0),v=n.parseInt(t.DOM.getStyle(i,"top"),0),c,l,r={};e!==""&&(o=t.Browser.is3dSupported?e.match(/translate3d\((.*?)\)/):e.match(/translate\((.*?)\)/),t.isNothing(o)||(u=o[1].split(", "),c=n.parseInt(u[0],0),l=n.parseInt(u[1],0))),r[this._transitionPrefix+"Property"]="",r[this._transitionPrefix+"Duration"]="",r[this._transitionPrefix+"TimingFunction"]="",r[this._transitionPrefix+"Delay"]="",t.DOM.setStyle(i,r),n.setTimeout(function(){t.isNothing(u)||(r={},r[this._transformLabel]="",r.left=a+c+"px",r.top=v+l+"px",t.DOM.setStyle(i,r)),t.isNothing(i[f])||(h=i[f],delete i[f],h(i))}.bind(this),this._applyTransitionDelay)}}})}(window,window.Code.Util),function(n,t,i){i.registerNamespace("Code.Util.TouchElement"),i.TouchElement.EventTypes={onTouch:"CodeUtilTouchElementOnTouch"},i.TouchElement.ActionTypes={touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",touchMoveEnd:"touchMoveEnd",tap:"tap",doubleTap:"doubleTap",swipeLeft:"swipeLeft",swipeRight:"swipeRight",swipeUp:"swipeUp",swipeDown:"swipeDown",gestureStart:"gestureStart",gestureChange:"gestureChange",gestureEnd:"gestureEnd"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.Util.TouchElement"),i.TouchElement.TouchElementClass=t({el:null,captureSettings:null,touchStartPoint:null,touchEndPoint:null,touchStartTime:null,doubleTapTimeout:null,touchStartHandler:null,touchMoveHandler:null,touchEndHandler:null,mouseDownHandler:null,mouseMoveHandler:null,mouseUpHandler:null,mouseOutHandler:null,gestureStartHandler:null,gestureChangeHandler:null,gestureEndHandler:null,swipeThreshold:null,swipeTimeThreshold:null,doubleTapSpeed:null,dispose:function(){var n;this.removeEventHandlers();for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(n,t){this.el=n,this.captureSettings={swipe:!1,move:!1,gesture:!1,doubleTap:!1,preventDefaultTouchEvents:!0},i.extend(this.captureSettings,t),this.swipeThreshold=50,this.swipeTimeThreshold=250,this.doubleTapSpeed=250,this.touchStartPoint={x:0,y:0},this.touchEndPoint={x:0,y:0}},addEventHandlers:function(){i.isNothing(this.touchStartHandler)&&(this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.touchEndHandler=this.onTouchEnd.bind(this),this.mouseDownHandler=this.onMouseDown.bind(this),this.mouseMoveHandler=this.onMouseMove.bind(this),this.mouseUpHandler=this.onMouseUp.bind(this),this.mouseOutHandler=this.onMouseOut.bind(this),this.gestureStartHandler=this.onGestureStart.bind(this),this.gestureChangeHandler=this.onGestureChange.bind(this),this.gestureEndHandler=this.onGestureEnd.bind(this)),i.Events.add(this.el,"touchstart",this.touchStartHandler),this.captureSettings.move&&i.Events.add(this.el,"touchmove",this.touchMoveHandler),i.Events.add(this.el,"touchend",this.touchEndHandler),i.Events.add(this.el,"mousedown",this.mouseDownHandler),i.Browser.isGestureSupported&&this.captureSettings.gesture&&(i.Events.add(this.el,"gesturestart",this.gestureStartHandler),i.Events.add(this.el,"gesturechange",this.gestureChangeHandler),i.Events.add(this.el,"gestureend",this.gestureEndHandler))},removeEventHandlers:function(){i.Events.remove(this.el,"touchstart",this.touchStartHandler),this.captureSettings.move&&i.Events.remove(this.el,"touchmove",this.touchMoveHandler),i.Events.remove(this.el,"touchend",this.touchEndHandler),i.Events.remove(this.el,"mousedown",this.mouseDownHandler),i.Browser.isGestureSupported&&this.captureSettings.gesture&&(i.Events.remove(this.el,"gesturestart",this.gestureStartHandler),i.Events.remove(this.el,"gesturechange",this.gestureChangeHandler),i.Events.remove(this.el,"gestureend",this.gestureEndHandler))},getTouchPoint:function(n){return{x:n[0].pageX,y:n[0].pageY}},fireTouchEvent:function(t){var r=0,u=0,f=0,e,o;if(r=this.touchEndPoint.x-this.touchStartPoint.x,u=this.touchEndPoint.y-this.touchStartPoint.y,f=Math.sqrt(r*r+u*u),this.captureSettings.swipe&&(e=new Date,o=e-this.touchStartTime,o<=this.swipeTimeThreshold)){if(n.Math.abs(r)>=this.swipeThreshold){i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:r<0?i.TouchElement.ActionTypes.swipeLeft:i.TouchElement.ActionTypes.swipeRight,targetEl:t.target,currentTargetEl:t.currentTarget});return}if(n.Math.abs(u)>=this.swipeThreshold){i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:u<0?i.TouchElement.ActionTypes.swipeUp:i.TouchElement.ActionTypes.swipeDown,targetEl:t.target,currentTargetEl:t.currentTarget});return}}if(f>1){i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchMoveEnd,point:this.touchEndPoint,targetEl:t.target,currentTargetEl:t.currentTarget});return}if(!this.captureSettings.doubleTap){i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:i.TouchElement.ActionTypes.tap,targetEl:t.target,currentTargetEl:t.currentTarget});return}if(i.isNothing(this.doubleTapTimeout)){this.doubleTapTimeout=n.setTimeout(function(){this.doubleTapTimeout=null,i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:i.TouchElement.ActionTypes.tap,targetEl:t.target,currentTargetEl:t.currentTarget})}.bind(this),this.doubleTapSpeed);return}n.clearTimeout(this.doubleTapTimeout),this.doubleTapTimeout=null,i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,point:this.touchEndPoint,action:i.TouchElement.ActionTypes.doubleTap,targetEl:t.target,currentTargetEl:t.currentTarget})},onTouchStart:function(n){this.captureSettings.preventDefaultTouchEvents&&n.preventDefault(),i.Events.remove(this.el,"mousedown",this.mouseDownHandler);var r=i.Events.getTouchEvent(n),t=r.touches;if(t.length>1&&this.captureSettings.gesture){this.isGesture=!0;return}this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=this.getTouchPoint(t),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:n.target,currentTargetEl:n.currentTarget})},onTouchMove:function(n){if(this.captureSettings.preventDefaultTouchEvents&&n.preventDefault(),!this.isGesture||!this.captureSettings.gesture){var t=i.Events.getTouchEvent(n),r=t.touches;i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchMove,point:this.getTouchPoint(r),targetEl:n.target,currentTargetEl:n.currentTarget})}},onTouchEnd:function(n){if(!this.isGesture||!this.captureSettings.gesture){this.captureSettings.preventDefaultTouchEvents&&n.preventDefault();var t=i.Events.getTouchEvent(n),r=i.isNothing(t.changedTouches)?t.touches:t.changedTouches;this.touchEndPoint=this.getTouchPoint(r),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:n.target,currentTargetEl:n.currentTarget}),this.fireTouchEvent(n)}},onMouseDown:function(n){n.preventDefault(),i.Events.remove(this.el,"touchstart",this.mouseDownHandler),i.Events.remove(this.el,"touchmove",this.touchMoveHandler),i.Events.remove(this.el,"touchend",this.touchEndHandler),this.captureSettings.move&&i.Events.add(this.el,"mousemove",this.mouseMoveHandler),i.Events.add(this.el,"mouseup",this.mouseUpHandler),i.Events.add(this.el,"mouseout",this.mouseOutHandler),this.touchStartTime=new Date,this.isGesture=!1,this.touchStartPoint=i.Events.getMousePosition(n),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchStart,point:this.touchStartPoint,targetEl:n.target,currentTargetEl:n.currentTarget})},onMouseMove:function(n){n.preventDefault(),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchMove,point:i.Events.getMousePosition(n),targetEl:n.target,currentTargetEl:n.currentTarget})},onMouseUp:function(n){n.preventDefault(),this.captureSettings.move&&i.Events.remove(this.el,"mousemove",this.mouseMoveHandler),i.Events.remove(this.el,"mouseup",this.mouseUpHandler),i.Events.remove(this.el,"mouseout",this.mouseOutHandler),this.touchEndPoint=i.Events.getMousePosition(n),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:n.target,currentTargetEl:n.currentTarget}),this.fireTouchEvent(n)},onMouseOut:function(n){var t=n.relatedTarget;this.el===t||i.DOM.isChildOf(t,this.el)||(n.preventDefault(),this.captureSettings.move&&i.Events.remove(this.el,"mousemove",this.mouseMoveHandler),i.Events.remove(this.el,"mouseup",this.mouseUpHandler),i.Events.remove(this.el,"mouseout",this.mouseOutHandler),this.touchEndPoint=i.Events.getMousePosition(n),i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.touchEnd,point:this.touchEndPoint,targetEl:n.target,currentTargetEl:n.currentTarget}),this.fireTouchEvent(n))},onGestureStart:function(n){n.preventDefault();var t=i.Events.getTouchEvent(n);i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.gestureStart,scale:t.scale,rotation:t.rotation,targetEl:n.target,currentTargetEl:n.currentTarget})},onGestureChange:function(n){n.preventDefault();var t=i.Events.getTouchEvent(n);i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.gestureChange,scale:t.scale,rotation:t.rotation,targetEl:n.target,currentTargetEl:n.currentTarget})},onGestureEnd:function(n){n.preventDefault();var t=i.Events.getTouchEvent(n);i.Events.fire(this,{type:i.TouchElement.EventTypes.onTouch,target:this,action:i.TouchElement.ActionTypes.gestureEnd,scale:t.scale,rotation:t.rotation,targetEl:n.target,currentTargetEl:n.currentTarget})}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Image");var r=n.Code.PhotoSwipe;r.Image.EventTypes={onLoad:"onLoad",onError:"onError"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Image");var r=n.Code.PhotoSwipe;r.Image.ImageClass=t({refObj:null,imageEl:null,src:null,caption:null,metaData:null,imageLoadHandler:null,imageErrorHandler:null,dispose:function(){var n;this.shrinkImage();for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t,i,r,u){this.refObj=t,this.originalSrc=i,this.src=i,this.caption=r,this.metaData=u,this.imageEl=new n.Image,this.imageLoadHandler=this.onImageLoad.bind(this),this.imageErrorHandler=this.onImageError.bind(this)},load:function(){if(this.imageEl.originalSrc=i.coalesce(this.imageEl.originalSrc,""),this.imageEl.originalSrc===this.src){this.imageEl.isError?i.Events.fire(this,{type:r.Image.EventTypes.onError,target:this}):i.Events.fire(this,{type:r.Image.EventTypes.onLoad,target:this});return}this.imageEl.isError=!1,this.imageEl.isLoading=!0,this.imageEl.naturalWidth=null,this.imageEl.naturalHeight=null,this.imageEl.isLandscape=!1,this.imageEl.onload=this.imageLoadHandler,this.imageEl.onerror=this.imageErrorHandler,this.imageEl.onabort=this.imageErrorHandler,this.imageEl.originalSrc=this.src,this.imageEl.src=this.src},shrinkImage:function(){i.isNothing(this.imageEl)||this.imageEl.src.indexOf(this.src)>-1&&(this.imageEl.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",i.isNothing(this.imageEl.parentNode)||i.DOM.removeChild(this.imageEl,this.imageEl.parentNode))},onImageLoad:function(){this.imageEl.onload=null,this.imageEl.naturalWidth=i.coalesce(this.imageEl.naturalWidth,this.imageEl.width),this.imageEl.naturalHeight=i.coalesce(this.imageEl.naturalHeight,this.imageEl.height),this.imageEl.isLandscape=this.imageEl.naturalWidth>this.imageEl.naturalHeight,this.imageEl.isLoading=!1,i.Events.fire(this,{type:r.Image.EventTypes.onLoad,target:this})},onImageError:function(){this.imageEl.onload=null,this.imageEl.onerror=null,this.imageEl.onabort=null,this.imageEl.isLoading=!1,this.imageEl.isError=!0,i.Events.fire(this,{type:r.Image.EventTypes.onError,target:this})}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Cache");var r=n.Code.PhotoSwipe;r.Cache.Mode={normal:"normal",aggressive:"aggressive"},r.Cache.Functions={getImageSource:function(n){return n.href},getImageCaption:function(n){if(n.nodeName==="IMG")return i.DOM.getAttribute(n,"alt");for(var u,t=0,r=n.childNodes.length;t<r;t++)if(u=n.childNodes[t],n.childNodes[t].nodeName==="IMG")return i.DOM.getAttribute(u,"alt")},getImageMetaData:function(){return{}}}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Cache");var r=n.Code.PhotoSwipe;r.Cache.CacheClass=t({images:null,settings:null,dispose:function(){var t,n,r;if(!i.isNothing(this.images)){for(n=0,r=this.images.length;n<r;n++)this.images[n].dispose();this.images.length=0}for(t in this)i.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(n,t){var u,f,i,e,o,s;for(this.settings=t,this.images=[],u=0,f=n.length;u<f;u++)i=n[u],e=this.settings.getImageSource(i),o=this.settings.getImageCaption(i),s=this.settings.getImageMetaData(i),this.images.push(new r.Image.ImageClass(i,e,o,s))},getImages:function(n){for(var e=[],u,t=0,f=n.length;t<f;t++)u=this.images[n[t]],this.settings.cacheMode===r.Cache.Mode.aggressive&&(u.cacheDoNotShrink=!0),e.push(u);if(this.settings.cacheMode===r.Cache.Mode.aggressive)for(t=0,f=this.images.length;t<f;t++)u=this.images[t],i.objectHasProperty(u,"cacheDoNotShrink")?delete u.cacheDoNotShrink:u.shrinkImage();return e}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Image),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.DocumentOverlay");var r=n.Code.PhotoSwipe;r.DocumentOverlay.CssClasses={documentOverlay:"ps-document-overlay"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.DocumentOverlay");var r=n.Code.PhotoSwipe;r.DocumentOverlay.DocumentOverlayClass=t({el:null,settings:null,initialBodyHeight:null,dispose:function(){var n;i.Animation.stop(this.el),i.DOM.removeChild(this.el,this.el.parentNode);for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t){this.settings=t,this.el=i.DOM.createElement("div",{"class":r.DocumentOverlay.CssClasses.documentOverlay},""),i.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,zIndex:this.settings.zIndex}),i.DOM.hide(this.el),this.settings.target===n?i.DOM.appendToBody(this.el):i.DOM.appendChild(this.el,this.settings.target),i.Animation.resetTranslate(this.el),this.initialBodyHeight=i.DOM.bodyOuterHeight()},resetPosition:function(){var r,t,u;this.settings.target===n?(r=i.DOM.windowWidth(),t=i.DOM.bodyOuterHeight()*2,u=this.settings.jQueryMobile?i.DOM.windowScrollTop()+"px":"0px",t<1&&(t=this.initialBodyHeight),i.DOM.windowHeight()>t&&(t=i.DOM.windowHeight())):(r=i.DOM.width(this.settings.target),t=i.DOM.height(this.settings.target),u="0px"),i.DOM.setStyle(this.el,{width:r,height:t,top:u})},fadeIn:function(n,t){this.resetPosition(),i.DOM.setStyle(this.el,"opacity",0),i.DOM.show(this.el),i.Animation.fadeIn(this.el,n,t)}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Carousel");var r=n.Code.PhotoSwipe;r.Carousel.EventTypes={onSlideByEnd:"PhotoSwipeCarouselOnSlideByEnd",onSlideshowStart:"PhotoSwipeCarouselOnSlideshowStart",onSlideshowStop:"PhotoSwipeCarouselOnSlideshowStop"},r.Carousel.CssClasses={carousel:"ps-carousel",content:"ps-carousel-content",item:"ps-carousel-item",itemLoading:"ps-carousel-item-loading",itemError:"ps-carousel-item-error"},r.Carousel.SlideByAction={previous:"previous",current:"current",next:"next"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Carousel");var r=n.Code.PhotoSwipe;r.Carousel.CarouselClass=t({el:null,contentEl:null,settings:null,cache:null,slideByEndHandler:null,currentCacheIndex:null,isSliding:null,isSlideshowActive:null,lastSlideByAction:null,touchStartPoint:null,touchStartPosition:null,imageLoadHandler:null,imageErrorHandler:null,slideshowTimeout:null,dispose:function(){for(var t,n=0,u=this.cache.images.length;n<u;n++)i.Events.remove(this.cache.images[n],r.Image.EventTypes.onLoad,this.imageLoadHandler),i.Events.remove(this.cache.images[n],r.Image.EventTypes.onError,this.imageErrorHandler);this.stopSlideshow(),i.Animation.stop(this.el),i.DOM.removeChild(this.el,this.el.parentNode);for(t in this)i.objectHasProperty(this,t)&&(this[t]=null)},initialize:function(t,u){var e,o,f;for(this.cache=t,this.settings=u,this.slideByEndHandler=this.onSlideByEnd.bind(this),this.imageLoadHandler=this.onImageLoad.bind(this),this.imageErrorHandler=this.onImageError.bind(this),this.currentCacheIndex=0,this.isSliding=!1,this.isSlideshowActive=!1,this.cache.images.length<3&&(this.settings.loop=!1),this.el=i.DOM.createElement("div",{"class":r.Carousel.CssClasses.carousel},""),i.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex}),i.DOM.hide(this.el),this.contentEl=i.DOM.createElement("div",{"class":r.Carousel.CssClasses.content},""),i.DOM.setStyle(this.contentEl,{display:"block",position:"absolute",left:0,top:0}),i.DOM.appendChild(this.contentEl,this.el),o=t.images.length<3?t.images.length:3,e=0;e<o;e++)f=i.DOM.createElement("div",{"class":r.Carousel.CssClasses.item+" "+r.Carousel.CssClasses.item+"-"+e},""),i.DOM.setAttribute(f,"style","float: left;"),i.DOM.setStyle(f,{display:"block",position:"relative",left:0,top:0,overflow:"hidden"}),this.settings.margin>0&&i.DOM.setStyle(f,{marginRight:this.settings.margin+"px"}),i.DOM.appendChild(f,this.contentEl);this.settings.target===n?i.DOM.appendToBody(this.el):i.DOM.appendChild(this.el,this.settings.target)},resetPosition:function(){var t,u,o,c,f,l,e,a,s,h;for(this.settings.target===n?(t=i.DOM.windowWidth(),u=i.DOM.windowHeight(),o=i.DOM.windowScrollTop()+"px"):(t=i.DOM.width(this.settings.target),u=i.DOM.height(this.settings.target),o="0px"),c=this.settings.margin>0?t+this.settings.margin:t,f=i.DOM.find("."+r.Carousel.CssClasses.item,this.contentEl),l=c*f.length,i.DOM.setStyle(this.el,{top:o,width:t,height:u}),i.DOM.setStyle(this.contentEl,{width:l,height:u}),e=0,a=f.length;e<a;e++)s=f[e],i.DOM.setStyle(s,{width:t,height:u}),h=i.DOM.find("img",s)[0],i.isNothing(h)||this.resetImagePosition(h);this.setContentLeftPosition()},resetImagePosition:function(n){if(!i.isNothing(n)){var h=i.DOM.getAttribute(n,"src"),t,r,u,o,s,f=i.DOM.width(this.el),e=i.DOM.height(this.el);this.settings.imageScaleMethod==="fitNoUpscale"?(r=n.naturalWidth,u=n.naturalHeight,r>f&&(t=f/r,r=Math.round(r*t),u=Math.round(u*t)),u>e&&(t=e/u,u=Math.round(u*t),r=Math.round(r*t))):(t=n.isLandscape?f/n.naturalWidth:e/n.naturalHeight,r=Math.round(n.naturalWidth*t),u=Math.round(n.naturalHeight*t),this.settings.imageScaleMethod==="zoom"?(t=1,u<e?t=e/u:r<f&&(t=f/r),t!==1&&(r=Math.round(r*t),u=Math.round(u*t))):this.settings.imageScaleMethod==="fit"&&(t=1,r>f?t=f/r:u>e&&(t=e/u),t!==1&&(r=Math.round(r*t),u=Math.round(u*t)))),o=Math.round((e-u)/2)+"px",s=Math.round((f-r)/2)+"px",i.DOM.setStyle(n,{position:"absolute",width:r,height:u,top:o,left:s,display:"block"})}},setContentLeftPosition:function(){var r,u,t;r=this.settings.target===n?i.DOM.windowWidth():i.DOM.width(this.settings.target),u=this.getItemEls(),t=0,this.settings.loop?t=(r+this.settings.margin)*-1:this.currentCacheIndex===this.cache.images.length-1?t=(u.length-1)*(r+this.settings.margin)*-1:this.currentCacheIndex>0&&(t=(r+this.settings.margin)*-1),i.DOM.setStyle(this.contentEl,{left:t+"px"})},show:function(n){this.currentCacheIndex=n,this.resetPosition(),this.setImages(!1),i.DOM.show(this.el),i.Animation.resetTranslate(this.contentEl);for(var u=this.getItemEls(),t=0,f=u.length;t<f;t++)i.Animation.resetTranslate(u[t]);i.Events.fire(this,{type:r.Carousel.EventTypes.onSlideByEnd,target:this,action:r.Carousel.SlideByAction.current,cacheIndex:this.currentCacheIndex})},setImages:function(n){var t,i=this.getItemEls(),r=this.currentCacheIndex+1,u=this.currentCacheIndex-1;this.settings.loop?(r>this.cache.images.length-1&&(r=0),u<0&&(u=this.cache.images.length-1),t=this.cache.getImages([u,this.currentCacheIndex,r]),n||this.addCacheImageToItemEl(t[1],i[1]),this.addCacheImageToItemEl(t[2],i[2]),this.addCacheImageToItemEl(t[0],i[0])):i.length===1?n||(t=this.cache.getImages([this.currentCacheIndex]),this.addCacheImageToItemEl(t[0],i[0])):i.length===2?this.currentCacheIndex===0?(t=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1]),n||this.addCacheImageToItemEl(t[0],i[0]),this.addCacheImageToItemEl(t[1],i[1])):(t=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex]),n||this.addCacheImageToItemEl(t[1],i[1]),this.addCacheImageToItemEl(t[0],i[0])):this.currentCacheIndex===0?(t=this.cache.getImages([this.currentCacheIndex,this.currentCacheIndex+1,this.currentCacheIndex+2]),n||this.addCacheImageToItemEl(t[0],i[0]),this.addCacheImageToItemEl(t[1],i[1]),this.addCacheImageToItemEl(t[2],i[2])):this.currentCacheIndex===this.cache.images.length-1?(t=this.cache.getImages([this.currentCacheIndex-2,this.currentCacheIndex-1,this.currentCacheIndex]),n||this.addCacheImageToItemEl(t[2],i[2]),this.addCacheImageToItemEl(t[1],i[1]),this.addCacheImageToItemEl(t[0],i[0])):(t=this.cache.getImages([this.currentCacheIndex-1,this.currentCacheIndex,this.currentCacheIndex+1]),n||this.addCacheImageToItemEl(t[1],i[1]),this.addCacheImageToItemEl(t[2],i[2]),this.addCacheImageToItemEl(t[0],i[0]))},addCacheImageToItemEl:function(n,t){i.DOM.removeClass(t,r.Carousel.CssClasses.itemError),i.DOM.addClass(t,r.Carousel.CssClasses.itemLoading),i.DOM.removeChildren(t),i.DOM.setStyle(n.imageEl,{display:"none"}),i.DOM.appendChild(n.imageEl,t),i.Animation.resetTranslate(n.imageEl),i.Events.add(n,r.Image.EventTypes.onLoad,this.imageLoadHandler),i.Events.add(n,r.Image.EventTypes.onError,this.imageErrorHandler),n.load()},slideCarousel:function(t,u,f){if(!this.isSliding){var o,s,e;if(o=this.settings.target===n?i.DOM.windowWidth()+this.settings.margin:i.DOM.width(this.settings.target)+this.settings.margin,f=i.coalesce(f,this.settings.slideSpeed),!(n.Math.abs(s)<1)){switch(u){case i.TouchElement.ActionTypes.swipeLeft:e=o*-1;break;case i.TouchElement.ActionTypes.swipeRight:e=o;break;default:s=t.x-this.touchStartPoint.x,e=n.Math.abs(s)>o/2?s>0?o:o*-1:0}this.lastSlideByAction=e<0?r.Carousel.SlideByAction.next:e>0?r.Carousel.SlideByAction.previous:r.Carousel.SlideByAction.current,this.settings.loop||(this.lastSlideByAction===r.Carousel.SlideByAction.previous&&this.currentCacheIndex===0||this.lastSlideByAction===r.Carousel.SlideByAction.next&&this.currentCacheIndex===this.cache.images.length-1)&&(e=0,this.lastSlideByAction=r.Carousel.SlideByAction.current),this.isSliding=!0,this.doSlideCarousel(e,f)}}},moveCarousel:function(n){this.isSliding||this.settings.enableDrag&&this.doMoveCarousel(n.x-this.touchStartPoint.x)},getItemEls:function(){return i.DOM.find("."+r.Carousel.CssClasses.item,this.contentEl)},previous:function(){this.stopSlideshow(),this.slideCarousel({x:0,y:0},i.TouchElement.ActionTypes.swipeRight,this.settings.nextPreviousSlideSpeed)},next:function(){this.stopSlideshow(),this.slideCarousel({x:0,y:0},i.TouchElement.ActionTypes.swipeLeft,this.settings.nextPreviousSlideSpeed)},slideshowNext:function(){this.slideCarousel({x:0,y:0},i.TouchElement.ActionTypes.swipeLeft)},startSlideshow:function(){this.stopSlideshow(),this.isSlideshowActive=!0,this.slideshowTimeout=n.setTimeout(this.slideshowNext.bind(this),this.settings.slideshowDelay),i.Events.fire(this,{type:r.Carousel.EventTypes.onSlideshowStart,target:this})},stopSlideshow:function(){i.isNothing(this.slideshowTimeout)||(n.clearTimeout(this.slideshowTimeout),this.slideshowTimeout=null,this.isSlideshowActive=!1,i.Events.fire(this,{type:r.Carousel.EventTypes.onSlideshowStop,target:this}))},onSlideByEnd:function(){if(!i.isNothing(this.isSliding)){var n=this.getItemEls();this.isSliding=!1,this.lastSlideByAction===r.Carousel.SlideByAction.next?this.currentCacheIndex=this.currentCacheIndex+1:this.lastSlideByAction===r.Carousel.SlideByAction.previous&&(this.currentCacheIndex=this.currentCacheIndex-1),this.settings.loop?(this.lastSlideByAction===r.Carousel.SlideByAction.next?i.DOM.appendChild(n[0],this.contentEl):this.lastSlideByAction===r.Carousel.SlideByAction.previous&&i.DOM.insertBefore(n[n.length-1],n[0],this.contentEl),this.currentCacheIndex<0?this.currentCacheIndex=this.cache.images.length-1:this.currentCacheIndex===this.cache.images.length&&(this.currentCacheIndex=0)):this.cache.images.length>3&&(this.currentCacheIndex>1&&this.currentCacheIndex<this.cache.images.length-2?this.lastSlideByAction===r.Carousel.SlideByAction.next?i.DOM.appendChild(n[0],this.contentEl):this.lastSlideByAction===r.Carousel.SlideByAction.previous&&i.DOM.insertBefore(n[n.length-1],n[0],this.contentEl):this.currentCacheIndex===1?this.lastSlideByAction===r.Carousel.SlideByAction.previous&&i.DOM.insertBefore(n[n.length-1],n[0],this.contentEl):this.currentCacheIndex===this.cache.images.length-2&&this.lastSlideByAction===r.Carousel.SlideByAction.next&&i.DOM.appendChild(n[0],this.contentEl)),this.lastSlideByAction!==r.Carousel.SlideByAction.current&&(this.setContentLeftPosition(),this.setImages(!0)),i.Events.fire(this,{type:r.Carousel.EventTypes.onSlideByEnd,target:this,action:this.lastSlideByAction,cacheIndex:this.currentCacheIndex}),this.isSlideshowActive&&(this.lastSlideByAction!==r.Carousel.SlideByAction.current?this.startSlideshow():this.stopSlideshow())}},onTouch:function(t,r){this.stopSlideshow();switch(t){case i.TouchElement.ActionTypes.touchStart:this.touchStartPoint=r,this.touchStartPosition={x:n.parseInt(i.DOM.getStyle(this.contentEl,"left"),0),y:n.parseInt(i.DOM.getStyle(this.contentEl,"top"),0)};break;case i.TouchElement.ActionTypes.touchMove:this.moveCarousel(r);break;case i.TouchElement.ActionTypes.touchMoveEnd:case i.TouchElement.ActionTypes.swipeLeft:case i.TouchElement.ActionTypes.swipeRight:this.slideCarousel(r,t)}},onImageLoad:function(n){var t=n.target;i.isNothing(t.imageEl.parentNode)||(i.DOM.removeClass(t.imageEl.parentNode,r.Carousel.CssClasses.itemLoading),this.resetImagePosition(t.imageEl)),i.Events.remove(t,r.Image.EventTypes.onLoad,this.imageLoadHandler),i.Events.remove(t,r.Image.EventTypes.onError,this.imageErrorHandler)},onImageError:function(n){var t=n.target;i.isNothing(t.imageEl.parentNode)||(i.DOM.removeClass(t.imageEl.parentNode,r.Carousel.CssClasses.itemLoading),i.DOM.addClass(t.imageEl.parentNode,r.Carousel.CssClasses.itemError)),i.Events.remove(t,r.Image.EventTypes.onLoad,this.imageLoadHandler),i.Events.remove(t,r.Image.EventTypes.onError,this.imageErrorHandler)}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Carousel");var r=n.Code.PhotoSwipe;r.Carousel.CarouselClass=r.Carousel.CarouselClass.extend({getStartingPos:function(){var t=this.touchStartPosition;return i.isNothing(t)&&(t={x:n.parseInt(i.DOM.getStyle(this.contentEl,"left"),0),y:n.parseInt(i.DOM.getStyle(this.contentEl,"top"),0)}),t},doMoveCarousel:function(t){var r;i.Browser.isCSSTransformSupported?(r={},r[i.Animation._transitionPrefix+"Property"]="all",r[i.Animation._transitionPrefix+"Duration"]="",r[i.Animation._transitionPrefix+"TimingFunction"]="",r[i.Animation._transitionPrefix+"Delay"]="0",r[i.Animation._transformLabel]=i.Browser.is3dSupported?"translate3d("+t+"px, 0px, 0px)":"translate("+t+"px, 0px)",i.DOM.setStyle(this.contentEl,r)):i.isNothing(n.jQuery)||n.jQuery(this.contentEl).stop().css("left",this.getStartingPos().x+t+"px")},doSlideCarousel:function(t,r){var f,u;if(r<=0){this.slideByEndHandler();return}if(i.Browser.isCSSTransformSupported){if(u=i.coalesce(this.contentEl.style.webkitTransform,this.contentEl.style.MozTransform,this.contentEl.style.transform,""),u.indexOf("translate3d("+t)===0){this.slideByEndHandler();return}if(u.indexOf("translate("+t)===0){this.slideByEndHandler();return}i.Animation.slideBy(this.contentEl,t,0,r,this.slideByEndHandler,this.settings.slideTimingFunction)}else i.isNothing(n.jQuery)||(f={left:this.getStartingPos().x+t+"px"},this.settings.animationTimingFunction==="ease-out"&&(this.settings.animationTimingFunction="easeOutQuad"),i.isNothing(n.jQuery.easing[this.settings.animationTimingFunction])&&(this.settings.animationTimingFunction="linear"),n.jQuery(this.contentEl).animate(f,this.settings.slideSpeed,this.settings.animationTimingFunction,this.slideByEndHandler))}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.TouchElement),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Toolbar");var r=n.Code.PhotoSwipe;r.Toolbar.CssClasses={toolbar:"ps-toolbar",toolbarContent:"ps-toolbar-content",toolbarTop:"ps-toolbar-top",caption:"ps-caption",captionBottom:"ps-caption-bottom",captionContent:"ps-caption-content",close:"ps-toolbar-close",play:"ps-toolbar-play",previous:"ps-toolbar-previous",previousDisabled:"ps-toolbar-previous-disabled",next:"ps-toolbar-next",nextDisabled:"ps-toolbar-next-disabled"},r.Toolbar.ToolbarAction={close:"close",play:"play",next:"next",previous:"previous",none:"none"},r.Toolbar.EventTypes={onTap:"PhotoSwipeToolbarOnClick",onBeforeShow:"PhotoSwipeToolbarOnBeforeShow",onShow:"PhotoSwipeToolbarOnShow",onBeforeHide:"PhotoSwipeToolbarOnBeforeHide",onHide:"PhotoSwipeToolbarOnHide"},r.Toolbar.getToolbar=function(){return'<div class="'+r.Toolbar.CssClasses.close+'"><div class="'+r.Toolbar.CssClasses.toolbarContent+'"><\/div><\/div><div class="'+r.Toolbar.CssClasses.play+'"><div class="'+r.Toolbar.CssClasses.toolbarContent+'"><\/div><\/div><div class="'+r.Toolbar.CssClasses.previous+'"><div class="'+r.Toolbar.CssClasses.toolbarContent+'"><\/div><\/div><div class="'+r.Toolbar.CssClasses.next+'"><div class="'+r.Toolbar.CssClasses.toolbarContent+'"><\/div><\/div>'}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.Toolbar");var r=n.Code.PhotoSwipe;r.Toolbar.ToolbarClass=t({toolbarEl:null,closeEl:null,playEl:null,previousEl:null,nextEl:null,captionEl:null,captionContentEl:null,currentCaption:null,settings:null,cache:null,timeout:null,isVisible:null,fadeOutHandler:null,touchStartHandler:null,touchMoveHandler:null,clickHandler:null,dispose:function(){var n;this.clearTimeout(),this.removeEventHandlers(),i.Animation.stop(this.toolbarEl),i.Animation.stop(this.captionEl),i.DOM.removeChild(this.toolbarEl,this.toolbarEl.parentNode),i.DOM.removeChild(this.captionEl,this.captionEl.parentNode);for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t,u){var f;this.settings=u,this.cache=t,this.isVisible=!1,this.fadeOutHandler=this.onFadeOut.bind(this),this.touchStartHandler=this.onTouchStart.bind(this),this.touchMoveHandler=this.onTouchMove.bind(this),this.clickHandler=this.onClick.bind(this),f=r.Toolbar.CssClasses.toolbar,this.settings.captionAndToolbarFlipPosition&&(f=f+" "+r.Toolbar.CssClasses.toolbarTop),this.toolbarEl=i.DOM.createElement("div",{"class":f},this.settings.getToolbar()),i.DOM.setStyle(this.toolbarEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex}),this.settings.target===n?i.DOM.appendToBody(this.toolbarEl):i.DOM.appendChild(this.toolbarEl,this.settings.target),i.DOM.hide(this.toolbarEl),this.closeEl=i.DOM.find("."+r.Toolbar.CssClasses.close,this.toolbarEl)[0],this.settings.preventHide&&!i.isNothing(this.closeEl)&&i.DOM.hide(this.closeEl),this.playEl=i.DOM.find("."+r.Toolbar.CssClasses.play,this.toolbarEl)[0],this.settings.preventSlideshow&&!i.isNothing(this.playEl)&&i.DOM.hide(this.playEl),this.nextEl=i.DOM.find("."+r.Toolbar.CssClasses.next,this.toolbarEl)[0],this.previousEl=i.DOM.find("."+r.Toolbar.CssClasses.previous,this.toolbarEl)[0],f=r.Toolbar.CssClasses.caption,this.settings.captionAndToolbarFlipPosition&&(f=f+" "+r.Toolbar.CssClasses.captionBottom),this.captionEl=i.DOM.createElement("div",{"class":f},""),i.DOM.setStyle(this.captionEl,{left:0,position:"absolute",overflow:"hidden",zIndex:this.settings.zIndex}),this.settings.target===n?i.DOM.appendToBody(this.captionEl):i.DOM.appendChild(this.captionEl,this.settings.target),i.DOM.hide(this.captionEl),this.captionContentEl=i.DOM.createElement("div",{"class":r.Toolbar.CssClasses.captionContent},""),i.DOM.appendChild(this.captionContentEl,this.captionEl),this.addEventHandlers()},resetPosition:function(){var u,t,r;this.settings.target===n?(this.settings.captionAndToolbarFlipPosition?(t=i.DOM.windowScrollTop(),r=i.DOM.windowScrollTop()+i.DOM.windowHeight()-i.DOM.height(this.captionEl)):(t=i.DOM.windowScrollTop()+i.DOM.windowHeight()-i.DOM.height(this.toolbarEl),r=i.DOM.windowScrollTop()),u=i.DOM.windowWidth()):(this.settings.captionAndToolbarFlipPosition?(t="0",r=i.DOM.height(this.settings.target)-i.DOM.height(this.captionEl)):(t=i.DOM.height(this.settings.target)-i.DOM.height(this.toolbarEl),r=0),u=i.DOM.width(this.settings.target)),i.DOM.setStyle(this.toolbarEl,{top:t+"px",width:u}),i.DOM.setStyle(this.captionEl,{top:r+"px",width:u})},toggleVisibility:function(n){this.isVisible?this.fadeOut():this.show(n)},show:function(n){i.Animation.stop(this.toolbarEl),i.Animation.stop(this.captionEl),this.resetPosition(),this.setToolbarStatus(n),i.Events.fire(this,{type:r.Toolbar.EventTypes.onBeforeShow,target:this}),this.showToolbar(),this.setCaption(n),this.showCaption(),this.isVisible=!0,this.setTimeout(),i.Events.fire(this,{type:r.Toolbar.EventTypes.onShow,target:this})},setTimeout:function(){this.settings.captionAndToolbarAutoHideDelay>0&&(this.clearTimeout(),this.timeout=n.setTimeout(this.fadeOut.bind(this),this.settings.captionAndToolbarAutoHideDelay))},clearTimeout:function(){i.isNothing(this.timeout)||(n.clearTimeout(this.timeout),this.timeout=null)},fadeOut:function(){this.clearTimeout(),i.Events.fire(this,{type:r.Toolbar.EventTypes.onBeforeHide,target:this}),i.Animation.fadeOut(this.toolbarEl,this.settings.fadeOutSpeed),i.Animation.fadeOut(this.captionEl,this.settings.fadeOutSpeed,this.fadeOutHandler),this.isVisible=!1},addEventHandlers:function(){i.Browser.isTouchSupported&&(i.Browser.blackberry||i.Events.add(this.toolbarEl,"touchstart",this.touchStartHandler),i.Events.add(this.toolbarEl,"touchmove",this.touchMoveHandler),i.Events.add(this.captionEl,"touchmove",this.touchMoveHandler)),i.Events.add(this.toolbarEl,"click",this.clickHandler)},removeEventHandlers:function(){i.Browser.isTouchSupported&&(i.Browser.blackberry||i.Events.remove(this.toolbarEl,"touchstart",this.touchStartHandler),i.Events.remove(this.toolbarEl,"touchmove",this.touchMoveHandler),i.Events.remove(this.captionEl,"touchmove",this.touchMoveHandler)),i.Events.remove(this.toolbarEl,"click",this.clickHandler)},handleTap:function(n){this.clearTimeout();var t;n.target===this.nextEl||i.DOM.isChildOf(n.target,this.nextEl)?t=r.Toolbar.ToolbarAction.next:n.target===this.previousEl||i.DOM.isChildOf(n.target,this.previousEl)?t=r.Toolbar.ToolbarAction.previous:n.target===this.closeEl||i.DOM.isChildOf(n.target,this.closeEl)?t=r.Toolbar.ToolbarAction.close:(n.target===this.playEl||i.DOM.isChildOf(n.target,this.playEl))&&(t=r.Toolbar.ToolbarAction.play),this.setTimeout(),i.isNothing(t)&&(t=r.Toolbar.ToolbarAction.none),i.Events.fire(this,{type:r.Toolbar.EventTypes.onTap,target:this,action:t,tapTarget:n.target})},setCaption:function(n){i.DOM.removeChildren(this.captionContentEl),this.currentCaption=i.coalesce(this.cache.images[n].caption," "),i.isObject(this.currentCaption)?i.DOM.appendChild(this.currentCaption,this.captionContentEl):(this.currentCaption===""&&(this.currentCaption=" "),i.DOM.appendText(this.currentCaption,this.captionContentEl)),this.currentCaption=this.currentCaption===" "?"":this.currentCaption,this.resetPosition()},showToolbar:function(){i.DOM.setStyle(this.toolbarEl,{opacity:this.settings.captionAndToolbarOpacity}),i.DOM.show(this.toolbarEl)},showCaption:function(){if((this.currentCaption===""||this.captionContentEl.childNodes.length<1)&&!this.settings.captionAndToolbarShowEmptyCaptions){i.DOM.hide(this.captionEl);return}i.DOM.setStyle(this.captionEl,{opacity:this.settings.captionAndToolbarOpacity}),i.DOM.show(this.captionEl)},setToolbarStatus:function(n){this.settings.loop||(i.DOM.removeClass(this.previousEl,r.Toolbar.CssClasses.previousDisabled),i.DOM.removeClass(this.nextEl,r.Toolbar.CssClasses.nextDisabled),n>0&&n<this.cache.images.length-1)||(n===0&&(i.isNothing(this.previousEl)||i.DOM.addClass(this.previousEl,r.Toolbar.CssClasses.previousDisabled)),n===this.cache.images.length-1&&(i.isNothing(this.nextEl)||i.DOM.addClass(this.nextEl,r.Toolbar.CssClasses.nextDisabled)))},onFadeOut:function(){i.DOM.hide(this.toolbarEl),i.DOM.hide(this.captionEl),i.Events.fire(this,{type:r.Toolbar.EventTypes.onHide,target:this})},onTouchStart:function(n){n.preventDefault(),i.Events.remove(this.toolbarEl,"click",this.clickHandler),this.handleTap(n)},onTouchMove:function(n){n.preventDefault()},onClick:function(n){n.preventDefault(),this.handleTap(n)}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.UILayer");var r=n.Code.PhotoSwipe;r.UILayer.CssClasses={uiLayer:"ps-uilayer"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.UILayer");var r=n.Code.PhotoSwipe;r.UILayer.UILayerClass=i.TouchElement.TouchElementClass.extend({el:null,settings:null,dispose:function(){var n;this.removeEventHandlers(),i.DOM.removeChild(this.el,this.el.parentNode);for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t){this.settings=t,this.el=i.DOM.createElement("div",{"class":r.UILayer.CssClasses.uiLayer},""),i.DOM.setStyle(this.el,{display:"block",position:"absolute",left:0,top:0,overflow:"hidden",zIndex:this.settings.zIndex,opacity:0}),i.DOM.hide(this.el),this.settings.target===n?i.DOM.appendToBody(this.el):i.DOM.appendChild(this.el,this.settings.target),this.supr(this.el,{swipe:!0,move:!0,gesture:i.Browser.iOS,doubleTap:!0,preventDefaultTouchEvents:this.settings.preventDefaultTouchEvents})},resetPosition:function(){this.settings.target===n?i.DOM.setStyle(this.el,{top:i.DOM.windowScrollTop()+"px",width:i.DOM.windowWidth(),height:i.DOM.windowHeight()}):i.DOM.setStyle(this.el,{top:"0px",width:i.DOM.width(this.settings.target),height:i.DOM.height(this.settings.target)})},show:function(){this.resetPosition(),i.DOM.show(this.el),this.addEventHandlers()},addEventHandlers:function(){this.supr()},removeEventHandlers:function(){this.supr()}})}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");var r=n.Code.PhotoSwipe;r.ZoomPanRotate.CssClasses={zoomPanRotate:"ps-zoom-pan-rotate"},r.ZoomPanRotate.EventTypes={onTransform:"PhotoSwipeZoomPanRotateOnTransform"}}(window,window.klass,window.Code.Util),function(n,t,i){i.registerNamespace("Code.PhotoSwipe.ZoomPanRotate");var r=n.Code.PhotoSwipe;r.ZoomPanRotate.ZoomPanRotateClass=t({el:null,settings:null,containerEl:null,imageEl:null,transformSettings:null,panStartingPoint:null,transformEl:null,dispose:function(){var n;i.DOM.removeChild(this.el,this.el.parentNode);for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t,u,f){var e,o,s,h;this.settings=t,this.settings.target===n?(e=document.body,o=i.DOM.windowWidth(),s=i.DOM.windowHeight(),h=i.DOM.windowScrollTop()+"px"):(e=this.settings.target,o=i.DOM.width(e),s=i.DOM.height(e),h="0px"),this.imageEl=u.imageEl.cloneNode(!1),i.DOM.setStyle(this.imageEl,{zIndex:1}),this.transformSettings={startingScale:1,scale:1,startingRotation:0,rotation:0,startingTranslateX:0,startingTranslateY:0,translateX:0,translateY:0},this.el=i.DOM.createElement("div",{"class":r.ZoomPanRotate.CssClasses.zoomPanRotate},""),i.DOM.setStyle(this.el,{left:0,top:h,position:"absolute",width:o,height:s,zIndex:this.settings.zIndex,display:"block"}),i.DOM.insertBefore(this.el,f.el,e),i.Browser.iOS?(this.containerEl=i.DOM.createElement("div","",""),i.DOM.setStyle(this.containerEl,{left:0,top:0,width:o,height:s,position:"absolute",zIndex:1}),i.DOM.appendChild(this.imageEl,this.containerEl),i.DOM.appendChild(this.containerEl,this.el),i.Animation.resetTranslate(this.containerEl),i.Animation.resetTranslate(this.imageEl),this.transformEl=this.containerEl):(i.DOM.appendChild(this.imageEl,this.el),this.transformEl=this.imageEl)},setStartingTranslateFromCurrentTransform:function(){var r=i.coalesce(this.transformEl.style.webkitTransform,this.transformEl.style.MozTransform,this.transformEl.style.transform),t;i.isNothing(r)||(t=r.match(/translate\((.*?)\)/),i.isNothing(t)||(t=t[1].split(", "),this.transformSettings.startingTranslateX=n.parseInt(t[0],10),this.transformSettings.startingTranslateY=n.parseInt(t[1],10)))},getScale:function(n){var t=this.transformSettings.startingScale*n;return this.settings.minUserZoom!==0&&t<this.settings.minUserZoom?t=this.settings.minUserZoom:this.settings.maxUserZoom!==0&&t>this.settings.maxUserZoom&&(t=this.settings.maxUserZoom),t},setStartingScaleAndRotation:function(n,t){this.transformSettings.startingScale=this.getScale(n),this.transformSettings.startingRotation=(this.transformSettings.startingRotation+t)%360},zoomRotate:function(n,t){this.transformSettings.scale=this.getScale(n),this.transformSettings.rotation=this.transformSettings.startingRotation+t,this.applyTransform()},panStart:function(n){this.setStartingTranslateFromCurrentTransform(),this.panStartingPoint={x:n.x,y:n.y}},pan:function(n){var t=n.x-this.panStartingPoint.x,i=n.y-this.panStartingPoint.y,r=t/this.transformSettings.scale,u=i/this.transformSettings.scale;this.transformSettings.translateX=this.transformSettings.startingTranslateX+r,this.transformSettings.translateY=this.transformSettings.startingTranslateY+u,this.applyTransform()},zoomAndPanToPoint:function(t,r){if(this.settings.target===n){this.panStart({x:i.DOM.windowWidth()/2,y:i.DOM.windowHeight()/2});var u=r.x-this.panStartingPoint.x,f=r.y-this.panStartingPoint.y,e=u/this.transformSettings.scale,o=f/this.transformSettings.scale;this.transformSettings.translateX=(this.transformSettings.startingTranslateX+e)*-1,this.transformSettings.translateY=(this.transformSettings.startingTranslateY+o)*-1}this.setStartingScaleAndRotation(t,0),this.transformSettings.scale=this.transformSettings.startingScale,this.transformSettings.rotation=0,this.applyTransform()},applyTransform:function(){var u=this.transformSettings.rotation%360,f=n.parseInt(this.transformSettings.translateX,10),e=n.parseInt(this.transformSettings.translateY,10),t="scale("+this.transformSettings.scale+") rotate("+u+"deg) translate("+f+"px, "+e+"px)";i.DOM.setStyle(this.transformEl,{webkitTransform:t,MozTransform:t,msTransform:t,transform:t}),i.Events.fire(this,{target:this,type:r.ZoomPanRotate.EventTypes.onTransform,scale:this.transformSettings.scale,rotation:this.transformSettings.rotation,rotationDegs:u,translateX:f,translateY:e})}})}(window,window.klass,window.Code.Util),function(n,t){t.registerNamespace("Code.PhotoSwipe");var i=n.Code.PhotoSwipe;i.CssClasses={buildingBody:"ps-building",activeBody:"ps-active"},i.EventTypes={onBeforeShow:"PhotoSwipeOnBeforeShow",onShow:"PhotoSwipeOnShow",onBeforeHide:"PhotoSwipeOnBeforeHide",onHide:"PhotoSwipeOnHide",onDisplayImage:"PhotoSwipeOnDisplayImage",onResetPosition:"PhotoSwipeOnResetPosition",onSlideshowStart:"PhotoSwipeOnSlideshowStart",onSlideshowStop:"PhotoSwipeOnSlideshowStop",onTouch:"PhotoSwipeOnTouch",onBeforeCaptionAndToolbarShow:"PhotoSwipeOnBeforeCaptionAndToolbarShow",onCaptionAndToolbarShow:"PhotoSwipeOnCaptionAndToolbarShow",onBeforeCaptionAndToolbarHide:"PhotoSwipeOnBeforeCaptionAndToolbarHide",onCaptionAndToolbarHide:"PhotoSwipeOnCaptionAndToolbarHide",onToolbarTap:"PhotoSwipeOnToolbarTap",onBeforeZoomPanRotateShow:"PhotoSwipeOnBeforeZoomPanRotateShow",onZoomPanRotateShow:"PhotoSwipeOnZoomPanRotateShow",onBeforeZoomPanRotateHide:"PhotoSwipeOnBeforeZoomPanRotateHide",onZoomPanRotateHide:"PhotoSwipeOnZoomPanRotateHide",onZoomPanRotateTransform:"PhotoSwipeOnZoomPanRotateTransform"},i.instances=[],i.activeInstances=[],i.setActivateInstance=function(n){var r=t.arrayIndexOf(n.settings.target,i.activeInstances,"target");if(r>-1)throw"Code.PhotoSwipe.activateInstance: Unable to active instance as another instance is already active for this target";i.activeInstances.push({target:n.settings.target,instance:n})},i.unsetActivateInstance=function(n){var r=t.arrayIndexOf(n,i.activeInstances,"instance");i.activeInstances.splice(r,1)},i.attach=function(n,r,u){var e,s,o,f;for(o=i.createInstance(n,r,u),e=0,s=n.length;e<s;e++)f=n[e],t.isNothing(f.nodeType)||f.nodeType===1&&(f.__photoSwipeClickHandler=i.onTriggerElementClick.bind(o),t.Events.remove(f,"click",f.__photoSwipeClickHandler),t.Events.add(f,"click",f.__photoSwipeClickHandler));return o},n.jQuery&&(n.jQuery.fn.photoSwipe=function(n,t){return i.attach(this,n,t)}),i.detatch=function(n){for(var r,u=0,f=n.originalImages.length;u<f;u++)r=n.originalImages[u],t.isNothing(r.nodeType)||r.nodeType===1&&(t.Events.remove(r,"click",r.__photoSwipeClickHandler),delete r.__photoSwipeClickHandler);i.disposeInstance(n)},i.createInstance=function(n,r,u){var f;if(t.isNothing(n))throw"Code.PhotoSwipe.attach: No images passed.";if(!t.isLikeArray(n))throw"Code.PhotoSwipe.createInstance: Images must be an array of elements or image urls.";if(n.length<1)throw"Code.PhotoSwipe.createInstance: No images to passed.";if(r=t.coalesce(r,{}),f=i.getInstance(u),t.isNothing(f))f=new i.PhotoSwipeClass(n,r,u),i.instances.push(f);else throw'Code.PhotoSwipe.createInstance: Instance with id "'+u+' already exists."';return f},i.disposeInstance=function(n){var t=i.getInstanceIndex(n);if(t<0)throw"Code.PhotoSwipe.disposeInstance: Unable to find instance to dispose.";n.dispose(),i.instances.splice(t,1),n=null},i.onTriggerElementClick=function(n){n.preventDefault();var t=this;t.show(n.currentTarget)},i.getInstance=function(n){for(var r,t=0,u=i.instances.length;t<u;t++)if(r=i.instances[t],r.id===n)return r;return null},i.getInstanceIndex=function(n){for(var u=-1,t=0,r=i.instances.length;t<r;t++)if(i.instances[t]===n){u=t;break}return u}}(window,window.Code.Util),function(n,t,i,r,u,f,e,o,s){i.registerNamespace("Code.PhotoSwipe");var h=n.Code.PhotoSwipe;h.PhotoSwipeClass=t({id:null,settings:null,isBackEventSupported:null,backButtonClicked:null,currentIndex:null,originalImages:null,mouseWheelStartTime:null,windowDimensions:null,cache:null,documentOverlay:null,carousel:null,uiLayer:null,toolbar:null,zoomPanRotate:null,windowOrientationChangeHandler:null,windowScrollHandler:null,windowHashChangeHandler:null,keyDownHandler:null,windowOrientationEventName:null,uiLayerTouchHandler:null,carouselSlideByEndHandler:null,carouselSlideshowStartHandler:null,carouselSlideshowStopHandler:null,toolbarTapHandler:null,toolbarBeforeShowHandler:null,toolbarShowHandler:null,toolbarBeforeHideHandler:null,toolbarHideHandler:null,mouseWheelHandler:null,zoomPanRotateTransformHandler:null,_isResettingPosition:null,_uiWebViewResetPositionTimeout:null,dispose:function(){var n;i.Events.remove(this,h.EventTypes.onBeforeShow),i.Events.remove(this,h.EventTypes.onShow),i.Events.remove(this,h.EventTypes.onBeforeHide),i.Events.remove(this,h.EventTypes.onHide),i.Events.remove(this,h.EventTypes.onDisplayImage),i.Events.remove(this,h.EventTypes.onResetPosition),i.Events.remove(this,h.EventTypes.onSlideshowStart),i.Events.remove(this,h.EventTypes.onSlideshowStop),i.Events.remove(this,h.EventTypes.onTouch),i.Events.remove(this,h.EventTypes.onBeforeCaptionAndToolbarShow),i.Events.remove(this,h.EventTypes.onCaptionAndToolbarShow),i.Events.remove(this,h.EventTypes.onBeforeCaptionAndToolbarHide),i.Events.remove(this,h.EventTypes.onCaptionAndToolbarHide),i.Events.remove(this,h.EventTypes.onZoomPanRotateTransform),this.removeEventHandlers(),i.isNothing(this.documentOverlay)||this.documentOverlay.dispose(),i.isNothing(this.carousel)||this.carousel.dispose(),i.isNothing(this.uiLayer)||this.uiLayer.dispose(),i.isNothing(this.toolbar)||this.toolbar.dispose(),this.destroyZoomPanRotate(),i.isNothing(this.cache)||this.cache.dispose();for(n in this)i.objectHasProperty(this,n)&&(this[n]=null)},initialize:function(t,u,f){var e;this.id=i.isNothing(f)?"PhotoSwipe"+(new Date).getTime().toString():f,this.originalImages=t,i.Browser.android&&!i.Browser.firefox&&n.navigator.userAgent.match(/Android (\d+.\d+)/).toString().replace(/^.*\,/,"")>=2.1&&(this.isBackEventSupported=!0),this.isBackEventSupported||(this.isBackEventSupported=i.objectHasProperty(n,"onhashchange")),this.settings={fadeInSpeed:250,fadeOutSpeed:250,preventHide:!1,preventSlideshow:!1,zIndex:1e3,backButtonHideEnabled:!0,enableKeyboard:!0,enableMouseWheel:!0,mouseWheelSpeed:350,autoStartSlideshow:!1,jQueryMobile:!i.isNothing(n.jQuery)&&!i.isNothing(n.jQuery.mobile),jQueryMobileDialogHash:"&ui-state=dialog",enableUIWebViewRepositionTimeout:!1,uiWebViewResetPositionDelay:500,target:n,preventDefaultTouchEvents:!0,loop:!0,slideSpeed:250,nextPreviousSlideSpeed:0,enableDrag:!0,swipeThreshold:50,swipeTimeThreshold:250,slideTimingFunction:"ease-out",slideshowDelay:3e3,doubleTapSpeed:250,margin:20,imageScaleMethod:"fit",captionAndToolbarHide:!1,captionAndToolbarFlipPosition:!1,captionAndToolbarAutoHideDelay:5e3,captionAndToolbarOpacity:.8,captionAndToolbarShowEmptyCaptions:!0,getToolbar:h.Toolbar.getToolbar,allowUserZoom:!0,allowRotationOnUserZoom:!1,maxUserZoom:5,minUserZoom:.5,doubleTapZoomLevel:2.5,getImageSource:h.Cache.Functions.getImageSource,getImageCaption:h.Cache.Functions.getImageCaption,getImageMetaData:h.Cache.Functions.getImageMetaData,cacheMode:h.Cache.Mode.normal},i.extend(this.settings,u),this.settings.target!==n&&(e=i.DOM.getStyle(this.settings.target,"position"),(e!=="relative"||e!=="absolute")&&i.DOM.setStyle(this.settings.target,"position","relative")),this.settings.target!==n?(this.isBackEventSupported=!1,this.settings.backButtonHideEnabled=!1):this.settings.preventHide&&(this.settings.backButtonHideEnabled=!1),this.cache=new r.CacheClass(t,this.settings)},show:function(t){var r,u;if(this._isResettingPosition=!1,this.backButtonClicked=!1,i.isNumber(t))this.currentIndex=t;else for(this.currentIndex=-1,r=0,u=this.originalImages.length;r<u;r++)if(this.originalImages[r]===t){this.currentIndex=r;break}if(this.currentIndex<0||this.currentIndex>this.originalImages.length-1)throw"Code.PhotoSwipe.PhotoSwipeClass.show: Starting index out of range";this.isAlreadyGettingPage=this.getWindowDimensions(),h.setActivateInstance(this),this.windowDimensions=this.getWindowDimensions(),this.settings.target===n?i.DOM.addClass(n.document.body,h.CssClasses.buildingBody):i.DOM.addClass(this.settings.target,h.CssClasses.buildingBody),this.createComponents(),i.Events.fire(this,{type:h.EventTypes.onBeforeShow,target:this}),this.documentOverlay.fadeIn(this.settings.fadeInSpeed,this.onDocumentOverlayFadeIn.bind(this))},getWindowDimensions:function(){return{width:i.DOM.windowWidth(),height:i.DOM.windowHeight()}},createComponents:function(){this.documentOverlay=new u.DocumentOverlayClass(this.settings),this.carousel=new f.CarouselClass(this.cache,this.settings),this.uiLayer=new o.UILayerClass(this.settings),this.settings.captionAndToolbarHide||(this.toolbar=new e.ToolbarClass(this.cache,this.settings))},resetPosition:function(){if(!this._isResettingPosition){var n=this.getWindowDimensions();(i.isNothing(this.windowDimensions)||n.width!==this.windowDimensions.width||n.height!==this.windowDimensions.height)&&(this._isResettingPosition=!0,this.windowDimensions=n,this.destroyZoomPanRotate(),this.documentOverlay.resetPosition(),this.carousel.resetPosition(),i.isNothing(this.toolbar)||this.toolbar.resetPosition(),this.uiLayer.resetPosition(),this._isResettingPosition=!1,i.Events.fire(this,{type:h.EventTypes.onResetPosition,target:this}))}},addEventHandler:function(n,t){i.Events.add(this,n,t)},addEventHandlers:function(){if(i.isNothing(this.windowOrientationChangeHandler)&&(this.windowOrientationChangeHandler=this.onWindowOrientationChange.bind(this),this.windowScrollHandler=this.onWindowScroll.bind(this),this.keyDownHandler=this.onKeyDown.bind(this),this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.uiLayerTouchHandler=this.onUILayerTouch.bind(this),this.carouselSlideByEndHandler=this.onCarouselSlideByEnd.bind(this),this.carouselSlideshowStartHandler=this.onCarouselSlideshowStart.bind(this),this.carouselSlideshowStopHandler=this.onCarouselSlideshowStop.bind(this),this.toolbarTapHandler=this.onToolbarTap.bind(this),this.toolbarBeforeShowHandler=this.onToolbarBeforeShow.bind(this),this.toolbarShowHandler=this.onToolbarShow.bind(this),this.toolbarBeforeHideHandler=this.onToolbarBeforeHide.bind(this),this.toolbarHideHandler=this.onToolbarHide.bind(this),this.mouseWheelHandler=this.onMouseWheel.bind(this),this.zoomPanRotateTransformHandler=this.onZoomPanRotateTransform.bind(this)),i.Browser.android)this.orientationEventName="resize";else if(i.Browser.iOS&&!i.Browser.safari)i.Events.add(n.document.body,"orientationchange",this.windowOrientationChangeHandler);else{var t=!i.isNothing(n.onorientationchange);this.orientationEventName=t?"orientationchange":"resize"}i.isNothing(this.orientationEventName)||i.Events.add(n,this.orientationEventName,this.windowOrientationChangeHandler),this.settings.target===n&&i.Events.add(n,"scroll",this.windowScrollHandler),this.settings.enableKeyboard&&i.Events.add(n.document,"keydown",this.keyDownHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.windowHashChangeHandler=this.onWindowHashChange.bind(this),this.settings.jQueryMobile?n.location.hash=this.settings.jQueryMobileDialogHash:(this.currentHistoryHashValue="PhotoSwipe"+(new Date).getTime().toString(),n.location.hash=this.currentHistoryHashValue),i.Events.add(n,"hashchange",this.windowHashChangeHandler)),this.settings.enableMouseWheel&&i.Events.add(n,"mousewheel",this.mouseWheelHandler),i.Events.add(this.uiLayer,i.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler),i.Events.add(this.carousel,f.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler),i.Events.add(this.carousel,f.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler),i.Events.add(this.carousel,f.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler),i.isNothing(this.toolbar)||(i.Events.add(this.toolbar,e.EventTypes.onTap,this.toolbarTapHandler),i.Events.add(this.toolbar,e.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),i.Events.add(this.toolbar,e.EventTypes.onShow,this.toolbarShowHandler),i.Events.add(this.toolbar,e.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),i.Events.add(this.toolbar,e.EventTypes.onHide,this.toolbarHideHandler))},removeEventHandlers:function(){i.Browser.iOS&&!i.Browser.safari&&i.Events.remove(n.document.body,"orientationchange",this.windowOrientationChangeHandler),i.isNothing(this.orientationEventName)||i.Events.remove(n,this.orientationEventName,this.windowOrientationChangeHandler),i.Events.remove(n,"scroll",this.windowScrollHandler),this.settings.enableKeyboard&&i.Events.remove(n.document,"keydown",this.keyDownHandler),this.isBackEventSupported&&this.settings.backButtonHideEnabled&&i.Events.remove(n,"hashchange",this.windowHashChangeHandler),this.settings.enableMouseWheel&&i.Events.remove(n,"mousewheel",this.mouseWheelHandler),i.isNothing(this.uiLayer)||i.Events.remove(this.uiLayer,i.TouchElement.EventTypes.onTouch,this.uiLayerTouchHandler),i.isNothing(this.toolbar)||(i.Events.remove(this.carousel,f.EventTypes.onSlideByEnd,this.carouselSlideByEndHandler),i.Events.remove(this.carousel,f.EventTypes.onSlideshowStart,this.carouselSlideshowStartHandler),i.Events.remove(this.carousel,f.EventTypes.onSlideshowStop,this.carouselSlideshowStopHandler)),i.isNothing(this.toolbar)||(i.Events.remove(this.toolbar,e.EventTypes.onTap,this.toolbarTapHandler),i.Events.remove(this.toolbar,e.EventTypes.onBeforeShow,this.toolbarBeforeShowHandler),i.Events.remove(this.toolbar,e.EventTypes.onShow,this.toolbarShowHandler),i.Events.remove(this.toolbar,e.EventTypes.onBeforeHide,this.toolbarBeforeHideHandler),i.Events.remove(this.toolbar,e.EventTypes.onHide,this.toolbarHideHandler))},hide:function(){if(!this.settings.preventHide){if(i.isNothing(this.documentOverlay))throw"Code.PhotoSwipe.PhotoSwipeClass.hide: PhotoSwipe instance is already hidden";i.isNothing(this.hiding)&&(this.clearUIWebViewResetPositionTimeout(),this.destroyZoomPanRotate(),this.removeEventHandlers(),i.Events.fire(this,{type:h.EventTypes.onBeforeHide,target:this}),this.uiLayer.dispose(),this.uiLayer=null,i.isNothing(this.toolbar)||(this.toolbar.dispose(),this.toolbar=null),this.carousel.dispose(),this.carousel=null,i.DOM.removeClass(n.document.body,h.CssClasses.activeBody),this.documentOverlay.dispose(),this.documentOverlay=null,this._isResettingPosition=!1,h.unsetActivateInstance(this),i.Events.fire(this,{type:h.EventTypes.onHide,target:this}),this.goBackInHistory())}},goBackInHistory:function(){this.isBackEventSupported&&this.settings.backButtonHideEnabled&&(this.backButtonClicked||n.history.back())},play:function(){this.isZoomActive()||this.settings.preventSlideshow||i.isNothing(this.carousel)||(!i.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.toolbar.fadeOut(),this.carousel.startSlideshow())},stop:function(){this.isZoomActive()||i.isNothing(this.carousel)||this.carousel.stopSlideshow()},previous:function(){this.isZoomActive()||i.isNothing(this.carousel)||this.carousel.previous()},next:function(){this.isZoomActive()||i.isNothing(this.carousel)||this.carousel.next()},toggleToolbar:function(){this.isZoomActive()||i.isNothing(this.toolbar)||this.toolbar.toggleVisibility(this.currentIndex)},fadeOutToolbarIfVisible:function(){!i.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.settings.captionAndToolbarAutoHideDelay>0&&this.toolbar.fadeOut()},createZoomPanRotate:function(){this.stop(),this.canUserZoom()&&!this.isZoomActive()&&(i.Events.fire(this,h.EventTypes.onBeforeZoomPanRotateShow),this.zoomPanRotate=new s.ZoomPanRotateClass(this.settings,this.cache.images[this.currentIndex],this.uiLayer),this.uiLayer.captureSettings.preventDefaultTouchEvents=!0,i.Events.add(this.zoomPanRotate,h.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),i.Events.fire(this,h.EventTypes.onZoomPanRotateShow),!i.isNothing(this.toolbar)&&this.toolbar.isVisible&&this.toolbar.fadeOut())},destroyZoomPanRotate:function(){i.isNothing(this.zoomPanRotate)||(i.Events.fire(this,h.EventTypes.onBeforeZoomPanRotateHide),i.Events.remove(this.zoomPanRotate,h.ZoomPanRotate.EventTypes.onTransform,this.zoomPanRotateTransformHandler),this.zoomPanRotate.dispose(),this.zoomPanRotate=null,this.uiLayer.captureSettings.preventDefaultTouchEvents=this.settings.preventDefaultTouchEvents,i.Events.fire(this,h.EventTypes.onZoomPanRotateHide))},canUserZoom:function(){var t,n;if(i.Browser.msie){if(t=document.createElement("div"),i.isNothing(t.style.msTransform))return!1}else if(!i.Browser.isCSSTransformSupported)return!1;return this.settings.allowUserZoom?this.carousel.isSliding?!1:(n=this.cache.images[this.currentIndex],i.isNothing(n))?!1:n.isLoading?!1:!0:!1},isZoomActive:function(){return!i.isNothing(this.zoomPanRotate)},getCurrentImage:function(){return this.cache.images[this.currentIndex]},onDocumentOverlayFadeIn:function(){n.setTimeout(function(){var t=this.settings.target===n?n.document.body:this.settings.target;i.DOM.removeClass(t,h.CssClasses.buildingBody),i.DOM.addClass(t,h.CssClasses.activeBody),this.addEventHandlers(),this.carousel.show(this.currentIndex),this.uiLayer.show(),this.settings.autoStartSlideshow?this.play():i.isNothing(this.toolbar)||this.toolbar.show(this.currentIndex),i.Events.fire(this,{type:h.EventTypes.onShow,target:this}),this.setUIWebViewResetPositionTimeout()}.bind(this),250)},setUIWebViewResetPositionTimeout:function(){this.settings.enableUIWebViewRepositionTimeout&&i.Browser.iOS&&!i.Browser.safari&&(i.isNothing(this._uiWebViewResetPositionTimeout)||n.clearTimeout(this._uiWebViewResetPositionTimeout),this._uiWebViewResetPositionTimeout=n.setTimeout(function(){this.resetPosition(),this.setUIWebViewResetPositionTimeout()}.bind(this),this.settings.uiWebViewResetPositionDelay))},clearUIWebViewResetPositionTimeout:function(){i.isNothing(this._uiWebViewResetPositionTimeout)||n.clearTimeout(this._uiWebViewResetPositionTimeout)},onWindowScroll:function(){this.resetPosition()},onWindowOrientationChange:function(){this.resetPosition()},onWindowHashChange:function(){var t="#"+(this.settings.jQueryMobile?this.settings.jQueryMobileDialogHash:this.currentHistoryHashValue);n.location.hash!==t&&(this.backButtonClicked=!0,this.hide())},onKeyDown:function(n){n.keyCode===37?(n.preventDefault(),this.previous()):n.keyCode===39?(n.preventDefault(),this.next()):n.keyCode===38||n.keyCode===40?n.preventDefault():n.keyCode===27?(n.preventDefault(),this.hide()):n.keyCode===32?(this.settings.hideToolbar?this.hide():this.toggleToolbar(),n.preventDefault()):n.keyCode===13&&(n.preventDefault(),this.play())},onUILayerTouch:function(t){if(this.isZoomActive())switch(t.action){case i.TouchElement.ActionTypes.gestureChange:this.zoomPanRotate.zoomRotate(t.scale,this.settings.allowRotationOnUserZoom?t.rotation:0);break;case i.TouchElement.ActionTypes.gestureEnd:this.zoomPanRotate.setStartingScaleAndRotation(t.scale,this.settings.allowRotationOnUserZoom?t.rotation:0);break;case i.TouchElement.ActionTypes.touchStart:this.zoomPanRotate.panStart(t.point);break;case i.TouchElement.ActionTypes.touchMove:this.zoomPanRotate.pan(t.point);break;case i.TouchElement.ActionTypes.doubleTap:this.destroyZoomPanRotate(),this.toggleToolbar();break;case i.TouchElement.ActionTypes.swipeLeft:this.destroyZoomPanRotate(),this.next(),this.toggleToolbar();break;case i.TouchElement.ActionTypes.swipeRight:this.destroyZoomPanRotate(),this.previous(),this.toggleToolbar()}else switch(t.action){case i.TouchElement.ActionTypes.touchMove:case i.TouchElement.ActionTypes.swipeLeft:case i.TouchElement.ActionTypes.swipeRight:this.fadeOutToolbarIfVisible();this.carousel.onTouch(t.action,t.point);break;case i.TouchElement.ActionTypes.touchStart:case i.TouchElement.ActionTypes.touchMoveEnd:this.carousel.onTouch(t.action,t.point);break;case i.TouchElement.ActionTypes.tap:this.toggleToolbar();break;case i.TouchElement.ActionTypes.doubleTap:this.settings.target===n&&(t.point.x-=i.DOM.windowScrollLeft(),t.point.y-=i.DOM.windowScrollTop());var r=this.cache.images[this.currentIndex].imageEl,u=n.parseInt(i.DOM.getStyle(r,"top"),10),f=n.parseInt(i.DOM.getStyle(r,"left"),10),e=f+i.DOM.width(r),o=u+i.DOM.height(r);t.point.x<f?t.point.x=f:t.point.x>e&&(t.point.x=e),t.point.y<u?t.point.y=u:t.point.y>o&&(t.point.y=o),this.createZoomPanRotate(),this.isZoomActive()&&this.zoomPanRotate.zoomAndPanToPoint(this.settings.doubleTapZoomLevel,t.point);break;case i.TouchElement.ActionTypes.gestureStart:this.createZoomPanRotate()}i.Events.fire(this,{type:h.EventTypes.onTouch,target:this,point:t.point,action:t.action})},onCarouselSlideByEnd:function(n){this.currentIndex=n.cacheIndex,i.isNothing(this.toolbar)||(this.toolbar.setCaption(this.currentIndex),this.toolbar.setToolbarStatus(this.currentIndex)),i.Events.fire(this,{type:h.EventTypes.onDisplayImage,target:this,action:n.action,index:n.cacheIndex})},onToolbarTap:function(n){switch(n.action){case e.ToolbarAction.next:this.next();break;case e.ToolbarAction.previous:this.previous();break;case e.ToolbarAction.close:this.hide();break;case e.ToolbarAction.play:this.play()}i.Events.fire(this,{type:h.EventTypes.onToolbarTap,target:this,toolbarAction:n.action,tapTarget:n.tapTarget})},onMouseWheel:function(n){var t=i.Events.getWheelDelta(n),r=n.timeStamp-(this.mouseWheelStartTime||0);r<this.settings.mouseWheelSpeed||(this.mouseWheelStartTime=n.timeStamp,this.settings.invertMouseWheel&&(t=t*-1),t<0?this.next():t>0&&this.previous())},onCarouselSlideshowStart:function(){i.Events.fire(this,{type:h.EventTypes.onSlideshowStart,target:this})},onCarouselSlideshowStop:function(){i.Events.fire(this,{type:h.EventTypes.onSlideshowStop,target:this})},onToolbarBeforeShow:function(){i.Events.fire(this,{type:h.EventTypes.onBeforeCaptionAndToolbarShow,target:this})},onToolbarShow:function(){i.Events.fire(this,{type:h.EventTypes.onCaptionAndToolbarShow,target:this})},onToolbarBeforeHide:function(){i.Events.fire(this,{type:h.EventTypes.onBeforeCaptionAndToolbarHide,target:this})},onToolbarHide:function(){i.Events.fire(this,{type:h.EventTypes.onCaptionAndToolbarHide,target:this})},onZoomPanRotateTransform:function(n){i.Events.fire(this,{target:this,type:h.EventTypes.onZoomPanRotateTransform,scale:n.scale,rotation:n.rotation,rotationDegs:n.rotationDegs,translateX:n.translateX,translateY:n.translateY})}})}(window,window.klass,window.Code.Util,window.Code.PhotoSwipe.Cache,window.Code.PhotoSwipe.DocumentOverlay,window.Code.PhotoSwipe.Carousel,window.Code.PhotoSwipe.Toolbar,window.Code.PhotoSwipe.UILayer,window.Code.PhotoSwipe.ZoomPanRotate);
//@ sourceMappingURL=code.photoswipe-3.0.5.min.js.map